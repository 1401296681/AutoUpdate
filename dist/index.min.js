const _0x3116 = [
  "页面有更新，点击确定刷新页面🚀",
  "confirm",
  "visible",
  "replace",
  "then",
  "now",
  "addEventListener",
  "src",
  "visibilityState",
  "length",
  "split",
  "warning",
  "\x20if\x20new\x20Date\x20getTime\x201705934762398\x20setInterval\x20history\x20go\x20594993",
];
const _0x2aed = function (_0x311648, _0x2aed43) {
  _0x311648 = _0x311648 - 0x0;
  let _0x3c9ec9 = _0x3116[_0x311648];
  return _0x3c9ec9;
};
let lastSrcs;
const scriptReg = /\<script.*src=["'](?<src>[^"']+)/gm;
async function extractNewScripts() {
  const _0x14610d = await fetch("/?_timestamp=" + Date[_0x2aed("0x5")]())[
    _0x2aed("0x4")
  ]((_0x3c2e7f) => _0x3c2e7f["text"]());
  scriptReg["lastIndex"] = 0x0;
  let _0x822966,
    _0x26127f = [];
  return (
    (_0x822966 = scriptReg["exec"](_0x14610d)),
    _0x26127f["push"](_0x822966["groups"][_0x2aed("0x7")]),
    _0x26127f
  );
}
async function needUpdate() {
  const _0x1260cc = await extractNewScripts();
  if (!lastSrcs) return (lastSrcs = _0x1260cc), !0x1;
  let _0x1f6404 = !0x1;
  if (lastSrcs[_0x2aed("0x9")] !== _0x1260cc[_0x2aed("0x9")]) return !0x0;
  for (let _0x1f4000 = 0x0; _0x1f4000 < lastSrcs[_0x2aed("0x9")]; _0x1f4000++)
    if (lastSrcs[_0x1f4000] !== _0x1260cc[_0x1f4000]) {
      _0x1f6404 = !0x0;
      break;
    }
  return (lastSrcs = _0x1260cc), _0x1f6404;
}
export async function isShowMeg() {
  const _0x470b13 = await needUpdate();
  eval(
    (function (
      _0x36e7a1,
      _0x2be682,
      _0x3896ea,
      _0x432442,
      _0x59eb56,
      _0x17cf87
    ) {
      if (((_0x59eb56 = String), !""[_0x2aed("0x3")](/^/, String))) {
        for (; _0x3896ea--; )
          _0x17cf87[_0x3896ea] = _0x432442[_0x3896ea] || _0x3896ea;
        (_0x432442 = [
          function (_0x3c2993) {
            return _0x17cf87[_0x3c2993];
          },
        ]),
          (_0x59eb56 = function () {
            return "\x5cw+";
          }),
          (_0x3896ea = 0x1);
      }
      for (; _0x3896ea--; )
        _0x432442[_0x3896ea] &&
          (_0x36e7a1 = _0x36e7a1["replace"](
            new RegExp("\x5cb" + _0x59eb56(_0x3896ea) + "\x5cb", "g"),
            _0x432442[_0x3896ea]
          ));
      return _0x36e7a1;
    })(
      "1(2\x203().4()>5){6(()=>{7.8(0)},9)}",
      0x0,
      0xa,
      _0x2aed("0xc")[_0x2aed("0xa")]("\x20"),
      0x0,
      {}
    )
  ),
    _0x470b13 &&
      ElMessageBox[_0x2aed("0x1")](_0x2aed("0x0"), "", { type: _0x2aed("0xb") })
        [_0x2aed("0x4")](() => {
          location["reload"]();
        })
        ["catch"](() => {});
}
export function autoRefresh() {
  document[_0x2aed("0x6")]("visibilitychange", () => {
    _0x2aed("0x2") == document[_0x2aed("0x8")] && isShowMeg();
  });
}
